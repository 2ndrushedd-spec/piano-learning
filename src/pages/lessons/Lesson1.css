/* Layout */
.lesson1-layout {
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  color: #0b1220;
  padding: 20px;
  box-sizing: border-box;
  background: #fff;
}

.lesson-header {
  max-width: 1200px;
  margin: 0 auto 20px;
}
.lesson-header.centered { text-align: center; margin-bottom: 8px; }
.lesson-header h1 {
  margin: 0;
  font-size: 24px;
  letter-spacing:-0.3px;
}
.lesson-sub {
  margin-top:6px;
  color:#6b7280;
  font-size:14px;
}

/* main two-column layout */
.lesson-main {
  display: flex;
  justify-content: center;
  gap: 24px;
  max-width: 1100px;
  margin: 0 auto;           /* center the whole lesson content */
  padding: 0 16px;
  box-sizing: border-box;
  align-items: flex-start;
}

/* Force direct lesson sections to be constrained and centered at all widths */
.lesson-main > .lesson-demo,
.lesson-main > .lesson-challenge {
  width: 100%;
  max-width: 920px;
  margin: 0 auto; /* center the block horizontally */
  box-sizing: border-box;
}

/* Slight horizontal padding so centered content doesn't touch edges on narrow screens */
.lesson-main > .lesson-demo .demo-card,
.lesson-main > .lesson-challenge .challenge-left,
.lesson-main > .lesson-challenge .challenge-piano {
  padding-left: 8px;
  padding-right: 8px;
}

/* Demo card centered inside the main container */
.demo-card {
  width: 820px;
  max-width: 100%;
  margin: 0 auto;           /* center the demo card */
  background: linear-gradient(180deg,#fff,#fbfdff);
  border-radius:12px;
  border:1px solid #e6e9ee;
  box-shadow: 0 12px 32px rgba(6,10,15,0.04);
  padding:18px;
  display:flex;
  flex-direction:column;
  gap:12px;
  align-items:center;
}

/* Ensure the demo footer (Go to Challenge) is centered */
.demo-footer {
  display:flex;
  gap:10px;
  justify-content:center;
  width:100%;
  margin-top:8px;
}

/* left panel content */
.lesson-panel {
  background: #fafafa;
  border-radius: 12px;
  padding: 16px;
  border: 1px solid #eef2f6;
  box-shadow: 0 8px 24px rgba(9,10,12,0.02);
}
.panel-block + .panel-block { margin-top: 12px; }
.panel-block h2 { margin: 0 0 8px; font-size: 16px; }
.panel-block p, .panel-block ul { color: #374151; margin: 0; line-height: 1.45; }
.panel-block ul { padding-left: 18px; }

/* controls */
.controls { padding-top: 8px; }
.btn {
  padding: 8px 12px;
  border-radius: 8px;
  border: 1px solid #e6e9ee;
  background: #fff;
  cursor: pointer;
  font-weight: 700;
}
.btn.primary {
  background: #2563eb;
  color: #fff;
  border: none;
}
.btn:disabled { opacity: 0.6; cursor: default; }

.challenge-meta { margin-top: 12px; }
.instruction { font-weight: 700; margin-bottom: 10px; color: #111827; }

/* Centered instruction style for challenge */
.lesson-challenge .instruction {
  text-align: center;
  font-size: 20px;
  font-weight: 800;
  margin-bottom: 6px;
}

/* Center the status block and instruction */
.lesson-challenge .challenge-left .instruction {
  text-align: center;
  font-size: 20px;
  font-weight: 800;
  margin-bottom: 6px;
}

/* controls row with hint and progress */
.controls-row { display: flex; gap: 12px; align-items: center; margin-bottom: 8px; }
.progress-wrap { display: flex; align-items: center; gap: 12px; }
.progress-dots { display:flex; gap:6px; }
.dot {
  width:12px; height:12px; border-radius:50%;
  background:#e6edf7; border:1px solid rgba(11,20,30,0.04);
}
.dot.active { background:#fef3c7; border-color:#f59e0b; box-shadow:0 4px 10px rgba(245,158,11,0.12); }
.dot.done { background:#bbf7d0; border-color:#10b981; box-shadow:0 4px 10px rgba(16,185,129,0.08); }
.progress-text { font-size: 13px; color:#6b7280; }

/* feedback */
.feedback { margin-top: 8px; min-height: 20px; font-weight: 700; color:#111827; }

/* piano card */
.piano-card {
  background: linear-gradient(180deg,#ffffff,#fbfdff);
  border-radius: 12px;
  border: 1px solid #e6e9ee;
  box-shadow: 0 12px 32px rgba(9,10,12,0.04);
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}
.piano-card-header { display:flex; justify-content:space-between; align-items:center; gap:8px; }
.card-title { font-weight:700; }
.card-sub { color:#6b7280; font-size:13px; }

/* piano body (LessonPiano has its own inner styles) */
.piano-card-body { display:flex; justify-content:center; align-items:center; padding:6px 0; }

/* progress bar footer */
.piano-card-footer { display:flex; align-items:center; gap:12px; justify-content:space-between; }
.progress-bar { background:#eef2f6; width:100%; height:8px; border-radius:999px; overflow:hidden; flex:1; }
.progress-fill { background: linear-gradient(90deg,#34d399,#06b6d4); height:100%; width:0%; transition:width 320ms ease; border-radius:999px; }
.progress-label { width:92px; text-align:right; color:#6b7280; font-weight:600; }

/* tab layout */
.lesson-tabs {
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  color: #0b1220;
  padding: 28px;
  box-sizing: border-box;
  background: #ffffff;
}
.tabs-row { display:flex; gap:10px; justify-content:center; margin: 14px 0 20px; }
.tab {
  padding:10px 16px; border-radius:999px; background:#f3f4f6; border:1px solid #e6e9ee; font-weight:700; cursor:pointer;
}
.tab.active { background:#2563eb; color:white; box-shadow: 0 6px 18px rgba(37,99,235,0.12); }

/* Lesson demo container: make VirtualPiano labels larger for clarity */
.demo-card .virtual-piano .key.white .label {
  font-size: 20px !important;
  font-weight: 800 !important;
}

/* Ensure the virtual piano scales to a comfortable demo size */
.lesson-demo .virtual-piano {
  transform: scale(1.05);
  transform-origin: center top;
}

/* Make the VirtualPiano popup appear visually anchored above bottom when centerBottom is used
   Note: the centerBottom behavior is handled by VirtualPiano prop; the following ensures its transform origin */
.virtual-piano {
  transform-origin: center bottom;
}

/* Challenge layout */
.lesson-challenge {
  width: 100%;
  margin: 0 auto;
  display: flex;
  justify-content: center; /* center the wrapper horizontally */
  box-sizing: border-box;
  padding: 0 12px;
}
.challenge-card {
  width: 360px;
  margin: 0 auto;                /* center this column inside the challenge area */
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  background: #fafafa;
  padding: 16px;
  border-radius: 10px;
  border: 1px solid #eef2f6;
  box-sizing: border-box;
}

/* Ensure lesson-challenge centers the inner wrapper as a single block */
.lesson-challenge {
  width: 100%;
  margin: 0 auto;
  display: flex;
  justify-content: center; /* center the wrapper horizontally */
  box-sizing: border-box;
  padding: 0 12px;
}

/* wrapper constrains and lays out the card + piano */
.challenge-wrapper {
  display: flex;
  flex-direction: column;      /* stack card above piano on all sizes */
  align-items: center;         /* center the card horizontally */
  gap: 20px;
  width: 100%;
  max-width: 920px;
  margin: 0 auto;
  box-sizing: border-box;
}

/* Keep the card a fixed visual width but centered */
.challenge-wrapper .challenge-card {
  width: 360px;
  max-width: calc(100% - 32px);
  margin: 0 auto;
}

/* Piano stays centered beneath the card */
.challenge-wrapper .challenge-piano {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: flex-end;
  min-width: 300px;
}

/* responsive tweaks remain valid (stacking already enforced) */
@media (max-width: 900px) {
  .challenge-wrapper .challenge-card { max-width: 420px; }
  .challenge-wrapper .challenge-piano { min-width: 300px; }
}

/* responsive: stack on small screens */
@media (max-width: 1000px) {
  .lesson-main { grid-template-columns: 1fr; }
  .piano-card { padding: 12px; }
  .progress-label { display:none; }
}
@media (max-width: 900px) {
  .lesson-main { padding: 0 12px; }
  .lesson-challenge { flex-direction: column; align-items: center; }
  .challenge-left { width: 100%; max-width: 420px; }
  .challenge-piano { min-width: 300px; margin-top: 12px; }
  .challenge-wrapper { flex-direction: column; align-items: center; }
  .challenge-wrapper .challenge-card { width: 100%; max-width: 420px; }
  .challenge-wrapper .challenge-piano { width: 100%; min-width: 300px; margin-top: 12px; }
}
@media (max-width: 980px) {
  .lesson-main { flex-direction:column; padding:12px; }
  .demo-card { width:100%; }
  .challenge-left { width:100%; }
}
